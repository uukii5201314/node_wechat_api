<!DOCTYPE html>
<html>
<head>
	<title>本周<%= currentWeek %>周课程表</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="css/course.css">
	<script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
<!--	<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />-->
<!--	<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>-->
</head>
<body>
	<div class="container">
		<table id="schedule">
			<thead>
				<tr>
					<th></th>
					<th>周一</th>
					<th>周二</th>
					<th>周三</th>
					<th>周四</th>
					<th>周五</th>
					<th>周六</th>
					<th>周日</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>1-2</td>
					<td class="color-1" style="<%= week11[0] ? '' : 'opacity: 0;' %>"><%= week11[0] ? week11[0].course : '' %><br><%= week11[0] ? week11[0].room : '' %><br><%= week11[0] ? week11[0].teacher : '' %></td>
					<td class="color-2" style="<%= week21[0] ? '' : 'opacity: 0;' %>"><%= week21[0] ? week21[0].course : '' %><br><%= week21[0] ? week21[0].room : '' %><br><%= week21[0] ? week21[0].teacher : '' %></td>
					<td class="color-3" style="<%= week31[0] ? '' : 'opacity: 0;' %>"><%= week31[0] ? week31[0].course : '' %><br><%= week31[0] ? week31[0].room : '' %><br><%= week31[0] ? week31[0].teacher : '' %></td>
					<td class="color-4" style="<%= week41[0] ? '' : 'opacity: 0;' %>"><%= week41[0] ? week41[0].course : '' %><br><%= week41[0] ? week41[0].room : '' %><br><%= week41[0] ? week41[0].teacher : '' %></td>
					<td class="color-5" style="<%= week51[0] ? '' : 'opacity: 0;' %>"><%= week51[0] ? week51[0].course : '' %><br><%= week51[0] ? week51[0].room : '' %><br><%= week51[0] ? week51[0].teacher : '' %></td>
					<td class="color-6" style="<%= week61[0] ? '' : 'opacity: 0;' %>"><%= week61[0] ? week61[0].course : '' %><br><%= week61[0] ? week61[0].room : '' %><br><%= week61[0] ? week61[0].teacher : '' %></td>
					<td class="color-7" style="<%= week71[0] ? '' : 'opacity: 0;' %>"><%= week71[0] ? week71[0].course : '' %><br><%= week71[0] ? week71[0].room : '' %><br><%= week71[0] ? week71[0].teacher : '' %></td>
				</tr>
				<tr>
					<td>3-4</td>
					<td class="color-2" style="<%= week12[0] ? '' : 'opacity: 0;' %>"><%= week12[0] ? week12[0].course : '' %><br><%= week12[0] ? week12[0].room : '' %><br><%= week12[0] ? week12[0].teacher : '' %></td>
					<td class="color-4" style="<%= week22[0] ? '' : 'opacity: 0;' %>"><%= week22[0] ? week22[0].course : '' %><br><%= week22[0] ? week22[0].room : '' %><br><%= week22[0] ? week22[0].teacher : '' %></td>
					<td class="color-6" style="<%= week32[0] ? '' : 'opacity: 0;' %>"><%= week32[0] ? week32[0].course : '' %><br><%= week32[0] ? week32[0].room : '' %><br><%= week32[0] ? week32[0].teacher : '' %></td>
					<td class="color-8" style="<%= week42[0] ? '' : 'opacity: 0;' %>"><%= week42[0] ? week42[0].course : '' %><br><%= week42[0] ? week42[0].room : '' %><br><%= week42[0] ? week42[0].teacher : '' %></td>
					<td class="color-10" style="<%= week52[0] ? '' : 'opacity: 0;' %>"><%= week52[0] ? week52[0].course : '' %><br><%= week52[0] ? week52[0].room : '' %><br><%= week52[0] ? week52[0].teacher : '' %></td>
					<td class="color-12" style="<%= week62[0] ? '' : 'opacity: 0;' %>"><%= week62[0] ? week62[0].course : '' %><br><%= week62[0] ? week62[0].room : '' %><br><%= week62[0] ? week62[0].teacher : '' %></td>
					<td class="color-14" style="<%= week72[0] ? '' : 'opacity: 0;' %>"><%= week72[0] ? week72[0].course : '' %><br><%= week72[0] ? week72[0].room : '' %><br><%= week72[0] ? week72[0].teacher : '' %></td>
				</tr>
				<tr>
					<td>5-6</td>
					<td class="color-3" style="<%= week13[0] ? '' : 'opacity: 0;' %>"><%= week13[0] ? week13[0].course : '' %><br><%= week13[0] ? week13[0].room : '' %><br><%= week13[0] ? week13[0].teacher : '' %></td>
					<td class="color-6" style="<%= week23[0] ? '' : 'opacity: 0;' %>"><%= week23[0] ? week23[0].course : '' %><br><%= week23[0] ? week23[0].room : '' %><br><%= week23[0] ? week23[0].teacher : '' %></td>
					<td class="color-9" style="<%= week33[0] ? '' : 'opacity: 0;' %>"><%= week33[0] ? week33[0].course : '' %><br><%= week33[0] ? week33[0].room : '' %><br><%= week33[0] ? week33[0].teacher : '' %></td>
					<td class="color-12" style="<%= week43[0] ? '' : 'opacity: 0;' %>"><%= week43[0] ? week43[0].course : '' %><br><%= week43[0] ? week43[0].room : '' %><br><%= week43[0] ? week43[0].teacher : '' %></td>
					<td class="color-15" style="<%= week53[0] ? '' : 'opacity: 0;' %>"><%= week53[0] ? week53[0].course : '' %><br><%= week53[0] ? week53[0].room : '' %><br><%= week53[0] ? week53[0].teacher : '' %></td>
					<td class="color-18" style="<%= week63[0] ? '' : 'opacity: 0;' %>"><%= week63[0] ? week63[0].course : '' %><br><%= week63[0] ? week63[0].room : '' %><br><%= week63[0] ? week63[0].teacher : '' %></td>
					<td class="color-21" style="<%= week73[0] ? '' : 'opacity: 0;' %>"><%= week73[0] ? week73[0].course : '' %><br><%= week73[0] ? week73[0].room : '' %><br><%= week73[0] ? week73[0].teacher : '' %></td>
				</tr>
				<tr>
					<td>7-8</td>
					<td class="color-4" style="<%= week14[0] ? '' : 'opacity: 0;' %>"><%= week14[0] ? week14[0].course : '' %><br><%= week14[0] ? week14[0].room : '' %><br><%= week14[0] ? week14[0].teacher : '' %></td>
					<td class="color-8" style="<%= week24[0] ? '' : 'opacity: 0;' %>"><%= week24[0] ? week24[0].course : '' %><br><%= week24[0] ? week24[0].room : '' %><br><%= week24[0] ? week24[0].teacher : '' %></td>
					<td class="color-12" style="<%= week34[0] ? '' : 'opacity: 0;' %>"><%= week34[0] ? week34[0].course : '' %><br><%= week34[0] ? week34[0].room : '' %><br><%= week34[0] ? week34[0].teacher : '' %></td>
					<td class="color-16" style="<%= week44[0] ? '' : 'opacity: 0;' %>"><%= week44[0] ? week44[0].course : '' %><br><%= week44[0] ? week44[0].room : '' %><br><%= week44[0] ? week44[0].teacher : '' %></td>
					<td class="color-20" style="<%= week54[0] ? '' : 'opacity: 0;' %>"><%= week54[0] ? week54[0].course : '' %><br><%= week54[0] ? week54[0].room : '' %><br><%= week54[0] ? week54[0].teacher : '' %></td>
					<td class="color-24" style="<%= week64[0] ? '' : 'opacity: 0;' %>"><%= week64[0] ? week64[0].course : '' %><br><%= week64[0] ? week64[0].room : '' %><br><%= week64[0] ? week64[0].teacher : '' %></td>
					<td class="color-28" style="<%= week74[0] ? '' : 'opacity: 0;' %>"><%= week74[0] ? week74[0].course : '' %><br><%= week74[0] ? week74[0].room : '' %><br><%= week74[0] ? week74[0].teacher : '' %></td>
				</tr>
				<tr>
					<td>9-10</td>
					<td class="color-5" style="<%= week15[0] ? '' : 'opacity: 0;' %>"><%= week15[0] ? week15[0].course : '' %><br><%= week15[0] ? week15[0].room : '' %><br><%= week15[0] ? week15[0].teacher : '' %></td>
					<td class="color-10" style="<%= week25[0] ? '' : 'opacity: 0;' %>"><%= week25[0] ? week25[0].course : '' %><br><%= week25[0] ? week25[0].room : '' %><br><%= week25[0] ? week25[0].teacher : '' %></td>
					<td class="color-15" style="<%= week35[0] ? '' : 'opacity: 0;' %>"><%= week35[0] ? week35[0].course : '' %><br><%= week35[0] ? week35[0].room : '' %><br><%= week35[0] ? week35[0].teacher : '' %></td>
					<td class="color-20" style="<%= week45[0] ? '' : 'opacity: 0;' %>"><%= week45[0] ? week45[0].course : '' %><br><%= week45[0] ? week45[0].room : '' %><br><%= week45[0] ? week45[0].teacher : '' %></td>
					<td class="color-25" style="<%= week55[0] ? '' : 'opacity: 0;' %>"><%= week55[0] ? week55[0].course : '' %><br><%= week55[0] ? week55[0].room : '' %><br><%= week55[0] ? week55[0].teacher : '' %></td>
					<td class="color-30" style="<%= week65[0] ? '' : 'opacity: 0;' %>"><%= week65[0] ? week65[0].course : '' %><br><%= week65[0] ? week65[0].room : '' %><br><%= week65[0] ? week65[0].teacher : '' %></td>
					<td class="color-35" style="<%= week75[0] ? '' : 'opacity: 0;' %>"><%= week75[0] ? week75[0].course : '' %><br><%= week75[0] ? week75[0].room : '' %><br><%= week75[0] ? week75[0].teacher : '' %></td>
				</tr>
			</tbody>
		</table>
	</div>

	<div id="modalContainer">
		<div id="modalOverlay"></div>
		<div id="modalContent">
			<span id="closeButton">&times;</span>
			<div id="weekContainer">
				<h3>选择周数</h3>
				<select id="weekSelect">
					<option value="1">第1周</option>
					<option value="2">第2周</option>
					<option value="3">第3周</option>
					<option value="4">第4周</option>
					<option value="5">第5周</option>
					<option value="6">第6周</option>
					<option value="7">第7周</option>
					<option value="8">第8周</option>
					<option value="9">第9周</option>
					<option value="10">第10周</option>
					<option value="11">第11周</option>
					<option value="12">第12周</option>
					<option value="13">第13周</option>
					<option value="14">第14周</option>
					<option value="15">第15周</option>
					<option value="16">第16周</option>
					<option value="17">第17周</option>
					<option value="18">第18周</option>
					<option value="19">第19周</option>
					<option value="20">第20周</option>
				</select>
			</div>
			<button id="confirmButton">确认</button>
		</div>
	</div>

	<!-- 底部导航栏 -->
	<div class="middle_below">
		<div class="footLeft" id="openModalButton">
			<img src="icon/周期管理.png" alt="">
			<div class="index">选择周次</div>
		</div>
		<a class="footLeft" href="course">
			<img src="icon/课程 (2).png" alt="">
			<div class="index1">本周课表</div>
		</a>
		<a class="footRight" href="coursesend">
			<img src="icon/推送.png" alt="">
			<div class="my">课表推送</div>
		</a>
	</div>
</body>
<script>
	$(document).ready(function() {
		var openModalButton = $("#openModalButton");
		var modalContainer = $("#modalContainer");
		var modalOverlay = $("#modalOverlay");
		var closeButton = $("#closeButton");

		openModalButton.on("click", function() {
			modalContainer.css("display", "block");
		});

		closeButton.on("click", function() {
			modalContainer.css("display", "none");
		});

		modalOverlay.on("click", function(event) {
			if (event.target === modalOverlay[0]) {
				modalContainer.css("display", "none");
			}
		});

		var confirmButton = $("#confirmButton");

		confirmButton.on("click", function() {
			var selectedWeek = $("#weekSelect").val();
			// 在这里处理确认按钮点击事件的逻辑
			console.log("选择的周数：" + selectedWeek);
			modalContainer.css("display", "none");
		});
	});

	$(document).ready(function() {
		$("#confirmButton").on("click", function() {
			var selectedWeek = $("#weekSelect").val();   // 获取选择的周数值
			// 发送 AJAX 请求到后端并传递选择的周数值
			$.ajax({
				url: "/course/" + selectedWeek,
				method: "GET",
				data: { week: selectedWeek },   // 传递选择的周数值
				success: function(response) {
					// 处理返回的数据，如更新界面内容
					console.log(response);
					// 成功后进行页面跳转
					window.location.href = "/course/" + selectedWeek;
				},
				error: function(error) {
					// 处理请求错误
					console.error(error);
				}
			});
		});
	});


</script>
</html>